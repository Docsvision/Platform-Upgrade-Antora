= Установка обновлений

== Обновление серверных компонентов

. Остановите все сервисы {dv} (в IIS и службах Windows) на основном сервере {dv}, узлах кластера и серверах с СУБП (модуль "Управление процессами").

. На сервере {dv} без удаления установите новую версию модуля "Платформа" (`{dv} 5 Platform server.msi`).

____

Если комплект обновления содержит обновление для модуля "Платформа", оно *всегда устанавливается первым*.

____

. Без удаления установленных версий установите новые версии серверных компонентов других модулей:

** "Базовые объекты" (`{dv} 5 BackOffice server.msi`),

** "Управление процессами" (`{dv} 5 Workflow server.msi`),

** "Управление документами" (`{dv} 5 DocumentManagement server.msi`),

** "Конструктор согласований" (`{dv} 5 ApprovalDesigner server.msi`),

** "Делопроизводство 4.5" (`{dv} 5 TakeOffice server.msi`),

** "Windows-клиент" (`{dv} 5 WindowsClient server.msi`).

. Обновите БД {dv} с помощью Консоли настройки {dv}.

Следующие действия приведут к загрузке стандартных настроек приложения "Управление документами" и модуля "Конструктор согласований". Все изменения, внесённые в стандартные настройки приложений (изменения настроек, разметок и др. стандартных видов карточек, стандартных шаблонов и т.д.), будут приведены к исходному виду. Данное замечание не распространяется на собственные виды карточек, унаследованные от стандартных, а также на иные элементы, которые были добавлены при настройке Решения. Если требуется сохранить изменения стандартных настроек приложения, обновите БД по инструкции, которая приведена в пункте xref:updateSafe.adoc["Обновление базы данных {dv} без перезаписи стандартных настроек"].

Для обновления БД {dv} выполните следующие действия:

. Откройте _Консоль настройки {dv}_.

Пользователь, от имени которого запускается "Консоль настройки {dv}" должен являться администратором {dv}, а также входить в группы {dv} в Справочнике сотрудников: "Администраторы УД", "Администраторы КС" и "Системная для WF".

. Нажимая кнопку *Далее* дойдите до страницы "Базы данных".

image::updateDb.png[ ]

. Выберите в списке основную БД {dv}, которая будет обновлена, выберите режим "Использовать выбранную в списке базу данных" и нажмите *Далее*.

. Будет предложено обновить базу данных до новой версии. *Подтвердите обновление*.

. На следующей странице не изменяйте выбор обновляемых библиотек карточек. Нажмите *Далее*.

image::updateCardLib.png[ ]

. На странице "Параметры базы данных" нажмите *Далее* и согласитесь на обновление БД при поступлении запроса.

Процесс обновления может занять продолжительное время.

. На странице настройки производительности и перезапуска IIS нажмите *Далее*.

. На странице "Управление Документами и Конструктор Согласований" нажмите *Далее*, чтобы загрузить стандартную конфигурацию приложения Управление документами.

. На следующей странице "Почтовый клиент" нажмите *Далее*.

. Подтвердите настройки Workflow и выйдите из мастера.

. Аналогичным образом обновите модули на узлах кластера {dv}, СУБП и Web-клиента. *Обновлять БД повторно не нужно.*

После установки новых версий:

== Обновление клиентских компонентов

Клиентские компоненты модулей на компьютерах пользователей будут обновлены автоматически при запуске Windows-клиента. Также новые версии можно установить вручную из предоставляемых пакетов установки: `*client.msi`. Новые версии модулей будут установлены с областью установки модуля "Платформа" версии 5.5.1.

Если клиентские компоненты модулей установлены на компьютере с сервером {dv}, их нужно обновить вручную из предоставляемых пакетов установки. При этом модули будут установлены с областью установки "для всех пользователей". Если клиентская часть модуля "Платформа" версии 5.5.1 на сервере установлена с областью установки "для текущего пользователя", *самостоятельно удалите все клиентские компоненты старой версии* до установки новой, в ином случае в ОС будут параллельно существовать старая и новая версии.