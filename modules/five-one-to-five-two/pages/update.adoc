= Установка обновлений

== Обновление серверных компонентов

. Остановите все сервисы {dv} (в IIS и службах Windows) на основном сервере {dv}, узлах кластера и серверах с СУБП (модуль _Управление процессами_).
. На сервере {dv} без удаления установите новую версию модуля {pl} (`{dv} 5 Platform server.msi`).
+
NOTE: Если комплект обновления содержит обновление для модуля {pl}, всегда устанавливайте его первым.
+
. Не удаляя существующих версий, установите новые версии серверных компонентов других модулей:
+
** Базовые объекты (`{dv} 5 BackOffice server.msi`).
** Управление процессами (`{dv} 5 Workflow server.msi`).
** Управление документами (`{dv} 5 DocumentManagement server.msi`).
** Конструктор согласований (`{dv} 5 ApprovalDesigner server.msi`).
** Делопроизводство 4.5 (`{dv} 5 TakeOffice server.msi`).
** {wincl} (`{dv} 5 WindowsClient server.msi`).
+
. Обновите БД {dv} с помощью программы _{cns}_.
+
Следующие действия приведут к загрузке стандартных настроек приложения _Управление документами_ и модуля _Конструктор согласований_. Все изменения, внесённые в стандартные настройки приложений (изменения настроек, разметок и др. стандартных видов карточек, стандартных шаблонов и т.д.), будут приведены к исходному виду.
+
Данное замечание не распространяется на собственные виды карточек, унаследованные от стандартных, а также на иные элементы, которые были добавлены при настройке Решения. Если требуется сохранить изменения стандартных настроек приложения, обновите БД по инструкции, которая приведена в пункте xref:update-no-overwrite.adoc[Обновление базы данных {dv} без перезаписи стандартных настроек].
+
.Чтобы обновить БД {dv}, выполните следующие действия:
.. Откройте _{cns}_.
+
Пользователь, от имени которого запускается {cns} должен являться администратором {dv}, а также входить в группы {dv} в Справочнике сотрудников: _Администраторы УД_, _Администраторы КС_ и _Системная для WF_.
+
.. Нажимая кнопку *Далее* дойдите до страницы _Базы данных_.
+
.Страница "Базы данных" мастре настройки {dv}
image::updateDb.png[Страница "Базы данных" мастре настройки {dv}]
+
.. Выберите в списке основную БД {dv}, которая будет обновлена, выберите режим *Использовать выбранную в списке базу данных* и нажмите *Далее*.
.. Будет предложено обновить базу данных до новой версии. *Подтвердите обновление*.
.. На следующей странице не изменяйте выбор обновляемых библиотек карточек. Нажмите *Далее*.
+
.Обновление баз данных
image::updateCardLib.png[Обновление баз данных]
+
.. На странице _Параметры базы данных_ нажмите *Далее* и согласитесь на обновление БД при поступлении запроса.
+
Процесс обновления может занять длительное время.
+
. На странице настройки производительности и перезапуска IIS нажмите *Далее*.
+
. На странице _Управление Документами и Конструктор Согласований_ нажмите *Далее*, чтобы загрузить стандартную конфигурацию приложения Управление документами.
+
. На странице _Почтовый клиент_ нажмите *Далее*.
+
. Подтвердите настройки Workflow и выйдите из мастера.
+
. Аналогичным образом обновите модули на узлах кластера {dv}, СУБП и Web-клиента. Обновлять БД повторно не нужно.

== Обновление клиентских компонентов

После установки новых версий клиентские компоненты модулей на компьютерах пользователей будут обновлены автоматически после запуска {wincl}а. Также новые версии можно установить вручную из предоставляемых пакетов установки. Новые версии модулей будут установлены с областью установки модуля {pl} версии 5.5.1.

Если клиентские компоненты модулей установлены на компьютере с сервером {dv}, их нужно обновить вручную из предоставляемых пакетов установки. При этом модули будут установлены с областью установки "для всех пользователей".

Если клиентская часть модуля {pl} версии 5.5.1 на сервере установлена с областью установки "для текущего пользователя", *самостоятельно удалите все клиентские компоненты старой версии* до установки новой, в ином случае в ОС будут параллельно существовать старая и новая версии.
