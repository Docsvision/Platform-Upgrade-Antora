:551-552:
:support:

//tag::noattr[]
// tag::part1[]
= Установка обновлений

== Обновление серверных компонентов

. Остановите все сервисы {dv} (в IIS и службах Windows) на основном сервере {dv}, узлах кластера и серверах с СУБП (модуль _{wf}_).
. На сервере {dv} без удаления установите новую версию модуля {pl} (`{dv} 5 Platform server.msi`).
+
NOTE: Если комплект обновления содержит обновление для модуля {pl}, всегда устанавливайте его первым.
+
. Не удаляя существующих версий, установите новые версии серверных компонентов других модулей:
+
ifdef::support[]
** {bo} (`{dv} 5 BackOffice server.msi`).
** {wf} (`{dv} 5 Workflow server.msi`).
** {dm} (`{dv} 5 DocumentManagement server.msi`).
** {ad} (`{dv} 5 ApprovalDesigner server.msi`).
** Делопроизводство 4.5 (`{dv} 5 TakeOffice server.msi`).
** {wc} (`{dv} 5 web-client server extension.msi`)
** {wincl} (`{dv} 5 WindowsClient server.msi`).
endif::[]
ifndef::support[]
** {bo} (`{dv} 5 BackOffice server.msi`).
** {wf} (`{dv} 5 Workflow server.msi`).
** {dm} (`{dv} 5 DocumentManagement server.msi`).
** {ad} (`{dv} 5 ApprovalDesigner server.msi`).
** Делопроизводство 4.5 (`{dv} 5 TakeOffice server.msi`).
** {wc} (`{dv} 5 web-client server extension.msi`)
** {wincl} (`{dv} 5 WindowsClient server.msi`).
** Служба {ws} (`{dv} 5 Worker service.msi`)
endif::[]
+
.Завершение обновления модуля {bo}
image::551-552:install-end.png[Завершение обновления модуля {bo}]
+
[WARNING]
====
При завершении установки каждого из указанных модулей будет доступна
возможность обновить БД {dv} из мастера установки -- флаг `*Обновить
базу данных*`. Данная функция запускает обновление библиотеки
карточек данного модуля.

ifdef::551-552[]
При установке данного комплекта обновлений флаг `*Обновить базу
данных*` должен быть обязательно снят.
endif::551-552[]
ifndef::551-552[]
Если комплект обновления включает модуль {pl}, снимите флаг
`*Обновить базу данных*` перед нажатием кнопки *Готово*.
endif::551-552[]
====
+
. Обновите БД {dv} с помощью программы _{cns}_.
+
Следующие действия приведут к загрузке стандартных настроек приложения _{dm}_ и модуля _{ad}_. Все изменения, внесённые в стандартные настройки приложений (изменения настроек, разметок и др. стандартных видов карточек, стандартных шаблонов и т.д.), будут приведены к исходному виду.
+
Данное замечание не распространяется на собственные виды карточек, унаследованные от стандартных, а также на иные элементы, которые были добавлены при настройке Решения. Если требуется сохранить изменения стандартных настроек приложения, обновите БД по инструкции, которая приведена в пункте xref:update-no-overwrite.adoc[Обновление базы данных {dv} без перезаписи стандартных настроек].
+
.Чтобы обновить БД {dv}, выполните следующие действия:
.. Откройте _{cns}_.
+
Пользователь, от имени которого запускается {cns} должен являться администратором {dv}, а также входить в группы {dv} в Справочнике сотрудников: _Администраторы УД_, _{dv-ad-admins-dir}_ и _{dv-sys-wf-dir}_.
+
.. Нажимая кнопку *Далее*, дойдите до страницы _Базы данных_.
+
.Страница "Базы данных" мастере настройки {dv}
image::551-552:update-db.png[Страница "Базы данных" мастре настройки {dv}]
+
.. Выберите в списке основную БД {dv}, которая будет обновлена, выберите режим *Использовать выбранную в списке базу данных* и нажмите *Далее*.
ifdef::551-552[]
.. Будет предложено обновить базу данных до новой версии. *Подтвердите обновление*.
endif::551-552[]
ifndef::551-552[]
.. Если была установлена новая версия модуля «Платформа» или при установке обновлений модулей было пропущено обновление базы данных (снят флаг «Обновить базу данных»), будет предложено обновить БД {dv} до новой версии.
.. На следующей странице не изменяйте выбор обновляемых библиотек карточек и нажмите *Далее*.
endif::551-552[]
.. На следующей странице не изменяйте выбор обновляемых библиотек карточек. Нажмите *Далее*.
+
.Обновление баз данных
image::551-552:update-card-lib.png[Обновление баз данных]
+
.. На странице _Параметры базы данных_ нажмите *Далее* и согласитесь на обновление БД при поступлении запроса.
+
Процесс обновления может занять длительное время.
+
.. На странице настройки производительности и перезапуска IIS нажмите *Далее*.
+
// end::part1[]
.. На странице _{dm} и {ad}_ нажмите *Далее*, чтобы загрузить стандартную конфигурацию приложения {dm}.
.. На странице _Почтовый клиент_ нажмите *Далее*.
+
// tag::part2[]
.. Подтвердите настройки Workflow и выйдите из мастера.
+
. Аналогичным образом обновите модули на узлах кластера {dv}, СУБП и Web-клиента. Обновлять БД повторно не нужно.
+
.После установки новых версий:
.. Измените в реестре ОС значение параметра {hklm-dv}\Platform\5.5\Console\WizardMode на `0`.
.. Перезапустите сервисы {dv}.

== Обновление клиентских компонентов

Клиентские компоненты модулей на компьютерах пользователей будут обновлены автоматически после запуска {wincl}а. Также новые версии можно установить вручную из предоставляемых пакетов установки. Новые версии модулей будут установлены с областью установки модуля {pl}.

Если клиентские компоненты модулей установлены на компьютере с сервером {dv}, их нужно обновить вручную из предоставляемых пакетов установки. При этом модули будут установлены с областью установки "для всех пользователей".

Если клиентская часть модуля {pl} на сервере установлена с областью установки "для текущего пользователя", *самостоятельно удалите все клиентские компоненты старой версии* до установки новой, в ином случае в ОС будут параллельно существовать старая и новая версии.
// end::part2[]
//end::noattr[]
